<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cantina Senai | Produtos</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo">
                Cantina Senai
            </div>
            <nav>
                <ul>
                    <li><a href="dashboard.html">üè† In√≠cio</a></li>
                    <li class="ativo"><a href="#">üçî Produtos</a></li>
                    <li><a href="#">üì¶ Pedidos</a></li>
                    <li><a href="#">üë§ Usu√°rios</a></li>
                </ul>
            </nav>
            <div class="logout">
                <button id="btn-sair" class="botao-sair">Sair</button>
            </div>
        </aside>

        <!-- Conte√∫do principal -->
        <div class="main-content">
            <header class="header">
                <h2>Gest√£o de Produtos</h2>
                <span id="usuarioLogado"></span>
            </header>

            <div class="content-area">
                <div class="produtos-acoes">
                    <input type="text" class="busca-input" placeholder="Buscar produto...">
                    <button class="botao-novo" id="btnNovoProduto">+ Novo Produto</button>
                </div>

                <div class="tabela-container">
                    <table id="tabelaProdutos">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Nome</th>
                                <th>Categoria</th>
                                <th>Pre√ßo (R$)</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1</td>
                                <td>Coxinha</td>
                                <td>Salgados</td>
                                <td>5,00</td>
                                <td>
                                    <button class="btn-editar">Editar</button>
                                    <button class="btn-excluir">Excluir</button>
                                </td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>Suco de Laranja</td>
                                <td>Bebidas</td>
                                <td>4,50</td>
                                <td>
                                    <button class="btn-editar">Editar</button>
                                    <button class="btn-excluir">Excluir</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de novo produto -->
    <div id="modalProduto" class="modal">
        <div class="modal-conteudo">
            <span class="fechar-modal" id="fecharModal">&times;</span>
            <h2>Novo Produto</h2>

            <form id="formProduto">
                <div class="form-grupo">
                    <label for="nomeProduto">Nome:</label>
                    <input type="text" id="nomeProduto" required>
                </div>

                <div class="form-grupo">
                    <label for="categoriaProduto">Categoria:</label>
                    <select id="categoriaProduto" required>
                        <option value="">Selecione...</option>
                        <option value="Salgados">Salgados</option>
                        <option value="Doces">Doces</option>
                        <option value="Bebidas">Bebidas</option>
                        <option value="Outros">Outros</option>
                    </select>
                </div>

                <div class="form-grupo">
                    <label for="precoProduto">Pre√ßo (R$):</label>
                    <input type="number" id="precoProduto" step="0.01" min="0" required>
                </div>

                <button type="submit" id="btnSalvar">Salvar</button>
            </form>
        </div>
    </div>

    <script>
        // Prote√ß√£o de acesso
        const usuario = localStorage.getItem("usuarioLogado");
        const usuarioTexto = document.getElementById("usuarioLogado");
        const btnSair = document.getElementById("btn-sair");

        if (!usuario) {
            window.location.href = "login.html";
        } else {
            usuarioTexto.textContent = "Logado como: " + usuario;
        }

        btnSair.addEventListener("click", () => {
            localStorage.removeItem("usuarioLogado");
            window.location.href = "login.html";
        });

        // Controle do modal
        const modal = document.getElementById("modalProduto");
        const btnNovo = document.getElementById("btnNovoProduto");
        const fechar = document.getElementById("fecharModal");
        const form = document.getElementById("formProduto");
        const tabela = document.getElementById("tabelaProdutos").querySelector("tbody");

        btnNovo.onclick = () => modal.style.display = "block";
        fechar.onclick = () => modal.style.display = "none";
        window.onclick = (event) => {
            if (event.target === modal) modal.style.display = "none";
        };

        // Adiciona novo produto na tabela
        form.addEventListener("submit", function(event) {
            event.preventDefault();

            const nome = document.getElementById("nomeProduto").value;
            const categoria = document.getElementById("categoriaProduto").value;
            const preco = document.getElementById("precoProduto").value;

            const id = tabela.rows.length + 1;

            const novaLinha = `
                <tr>
                    <td>${id}</td>
                    <td>${nome}</td>
                    <td>${categoria}</td>
                    <td>${parseFloat(preco).toFixed(2)}</td>
                    <td>
                        <button class="btn-editar">Editar</button>
                        <button class="btn-excluir">Excluir</button>
                    </td>
                </tr>
            `;
            tabela.insertAdjacentHTML("beforeend", novaLinha);

            form.reset();
            modal.style.display = "none";
        });
    </script>
</body>
</html>
